---
import LogoIcon from './LogoIcon.astro';
import PhoneIcon from './PhoneIcon.astro';
import HamburgerIcon from './HamburgerIcon.astro';
import { gsap } from "gsap";
---

<header id="main-header" class="p-4 fixed top-0 left-0 w-full z-50">
  <nav class="container mx-auto flex items-center justify-between bg-teal-500/80 backdrop-blur-lg text-white py-2 px-6 rounded-full font-sans shadow-lg">
    <!-- Logo and Brand Name -->
    <a href="#page-top" class="flex items-center gap-2 z-20">
      <LogoIcon class="w-8 h-8 text-white" />
      <span class="text-2xl font-bold">oPills</span>
    </a>

    <!-- Desktop Navigation Links -->
    <div class="hidden md:flex items-center gap-x-8 font-script text-2xl">
      <a href="#page-top" class="hover:underline">
        Home
      </a>
      <a href="#features" class="hover:underline">Features</a>
      <a href="#about" class="hover:underline">About</a>
      <a href="#testimonials" class="hover:underline">Reviews</a>
    </div>

    <!-- Desktop Phone Icon -->
    <a href="#contact" class="hidden md:block bg-white text-teal-500 rounded-full p-2">
      <PhoneIcon class="w-6 h-6" />
    </a>

    <!-- Mobile Menu Button -->
    <button id="menu-btn" class="z-20 md:hidden">
      <HamburgerIcon class="w-8 h-8 text-white" />
    </button>
  </nav>

  <!-- Mobile Menu -->
  <div id="mobile-menu" class="hidden absolute top-0 left-0 w-full h-screen bg-teal-500 z-10">
    <div class="container mx-auto flex flex-col items-center justify-center h-full gap-y-8 font-script text-4xl text-white">
      <a href="#page-top" class="hover:underline mobile-link">Home</a>
      <a href="#features" class="hover:underline mobile-link">Features</a>
      <a href="#about" class="hover:underline mobile-link">About</a>
      <a href="#testimonials" class="hover:underline mobile-link">Reviews</a>
      <a href="#contact" class="flex items-center gap-4 mt-8 border-2 border-white rounded-full py-2 px-6 mobile-link">
        <span>Contact</span>
        <PhoneIcon class="w-8 h-8" />
      </a>
    </div>
  </div>
</header>

<script>
  // --- Mobile Menu Logic ---
  const menuBtn = document.getElementById('menu-btn');
  const mobileMenu = document.getElementById('mobile-menu');
  const mobileLinks = document.querySelectorAll('.mobile-link');

  const toggleMenu = () => {
    mobileMenu?.classList.toggle('hidden');
    // Optional: prevent body scroll when menu is open
    document.body.style.overflow = mobileMenu?.classList.contains('hidden') ? 'auto' : 'hidden';
  };

  menuBtn?.addEventListener('click', toggleMenu);
  mobileLinks.forEach(link => link.addEventListener('click', toggleMenu));

  // --- Entry Animation ---
  gsap.from("#main-header nav", {
    y: -100,
    opacity: 0,
    duration: 1,
    ease: "power3.out",
    delay: 0.5 // Delay to start after hero text
  });
</script> 