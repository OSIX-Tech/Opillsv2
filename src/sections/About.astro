---
import BuildingIcon from '../components/BuildingIcon.astro';
---

<section id="about" class="min-h-screen flex flex-col justify-center py-20 px-8 sm:px-12 md:px-16 font-sans">
  <div class="container mx-auto">
    <!-- Parte Superior: Contenido Introductorio -->
    <div class="max-w-4xl mx-auto text-center mb-20">
      <h2 class="font-script text-5xl md:text-6xl text-brand-teal mb-6">What is oPills?</h2>
      <h3 class="text-2xl md:text-3xl text-gray-800 font-medium mb-4">
        oPills is the first full accessibility AI driven medication dashboard guided by expert analysts
      </h3>
      <p class="text-gray-600 leading-relaxed">
        oPills is the first full accessibility AI driven medication dashboard guided by expert analysts. oPills is the first full accessibility AI driven medication dashboard guided by expert analysts. oPills is the first full accessibility AI driven medication dashboard guided by expert analysts
      </p>
    </div>

    <!-- Parte Inferior: Tres Bloques de Características -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-12">
      <!-- Bloque 1 -->
      <div class="feature-block text-center">
        <BuildingIcon class="w-16 h-16 text-brand-teal mx-auto mb-4" />
        <h4 class="font-script text-3xl text-brand-teal mb-2">Real time follow-up</h4>
        <p class="text-gray-600">
          Pacients follow-up led by a easy-use interface. oPills is the first full accessibility AI driven medication dashboard guided by expert analysts
        </p>
      </div>
      <!-- Bloque 2 -->
      <div class="feature-block text-center">
        <BuildingIcon class="w-16 h-16 text-brand-teal mx-auto mb-4" />
        <h4 class="font-script text-3xl text-brand-teal mb-2">Real time follow-up</h4>
        <p class="text-gray-600">
          Pacients follow-up led by a easy-use interface. oPills is the first full accessibility AI driven medication dashboard guided by expert
        </p>
      </div>
      <!-- Bloque 3 -->
      <div class="feature-block text-center">
        <BuildingIcon class="w-16 h-16 text-brand-teal mx-auto mb-4" />
        <h4 class="font-script text-3xl text-brand-teal mb-2">Real time follow-up</h4>
        <p class="text-gray-600">
          Pacients follow-up led by a easy-use interface. oPills is the first full accessibility AI driven medication dashboard guided by expert analysts guided by expert
        </p>
      </div>
    </div>
  </div>
</section>

<script>
  import { gsap } from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";

  gsap.registerPlugin(ScrollTrigger);

  const aboutSection = document.getElementById('about');
  if (aboutSection) {
      const mainContent = aboutSection.querySelector('.max-w-4xl');
      const featureBlocks = gsap.utils.toArray('.feature-block');

      ScrollTrigger.matchMedia({
        // Escritorio
        "(min-width: 768px)": function() {
          const tl = gsap.timeline({
            scrollTrigger: {
              trigger: aboutSection,
              start: "top top",
              end: "bottom top",
              toggleActions: "play reverse play reverse"
            },
            defaults: { ease: "power2.out" }
          });
          
          if (mainContent) {
            tl.from(mainContent.children, { opacity: 0, y: 40, stagger: 0.2, duration: 0.8 });
          }
          if (featureBlocks.length > 0) {
            tl.from(featureBlocks, { opacity: 0, y: 50, duration: 0.6, stagger: 0.2, scale: 0.9 }, ">-0.3");
            const allChildren = (featureBlocks as HTMLElement[]).flatMap(block => Array.from(block.children));
            tl.from(allChildren, { opacity: 0, y: 20, duration: 0.4, stagger: 0.08 }, "<0.5");
          }
        },
        // Móvil
        "(max-width: 767px)": function() {
          const tl = gsap.timeline({
            scrollTrigger: {
              trigger: aboutSection,
              start: "top top",
              end: "bottom top",
              toggleActions: "play reverse play reverse"
            },
            defaults: { ease: "power2.out" }
          });

          if (mainContent) {
            tl.from(mainContent.children, { opacity: 0, y: 20, stagger: 0.2, duration: 0.6 }); // Menos desplazamiento y duración
          }
          if (featureBlocks.length > 0) {
            tl.from(featureBlocks, { opacity: 0, y: 25, duration: 0.5, stagger: 0.15, scale: 0.95 }, ">-0.3"); // Más sutil
            const allChildren = (featureBlocks as HTMLElement[]).flatMap(block => Array.from(block.children));
            tl.from(allChildren, { opacity: 0, y: 10, duration: 0.3, stagger: 0.05 }, "<0.5");
          }
        }
      });
  }
</script>
