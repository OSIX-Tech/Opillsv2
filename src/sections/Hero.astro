---
import PhoneIcon from '../components/PhoneIcon.astro';
import ArrowRightIcon from '../components/ArrowRightIcon.astro';
import { Image } from 'astro:assets';
---
<section id="hero-section" class="font-sans text-center py-16 px-4 overflow-x-hidden">
  <div class="w-full max-w-7xl mx-auto">
    <div>
      <h1 class="text-5xl md:text-7xl font-bold leading-tight">
        The most advanced<br />
        intelligent<br />
        <span class="text-brand-teal font-script">Dashboard</span>
      </h1>
      <div class="flex flex-col sm:flex-row justify-center items-center gap-4 mt-8">
        <button class="w-full sm:w-auto flex items-center justify-center gap-2 bg-brand-teal text-white font-bold py-3 px-6 rounded-full shadow-lg hover:shadow-xl transition-shadow">
          Contact
          <div class="bg-white text-brand-teal rounded-full p-1">
            <PhoneIcon class="w-5 h-5" />
          </div>
        </button>
        <button class="w-full sm:w-auto flex items-center justify-center gap-2 bg-white text-gray-700 font-bold py-3 px-6 rounded-full shadow-lg hover:shadow-xl transition-shadow border border-gray-200">
          Learn more
          <div class="bg-brand-teal text-white rounded-full p-1">
            <ArrowRightIcon class="w-5 h-5" />
          </div>
        </button>
      </div>
    </div>

    <div class="mt-12 container mx-auto">
      <div class="flex flex-wrap lg:flex-nowrap items-center justify-center gap-x-8 gap-y-12">
        <div class="logo-placeholder w-40 shrink-0 order-2 lg:order-1 transition-opacity duration-300">
          <div class="bg-gray-200 h-16 rounded-lg flex items-center justify-center">
            <p class="text-gray-500 text-sm">EIT Logo</p>
          </div>
        </div>
        
        <div 
          id="mockup-container" 
          class="w-full max-w-4xl order-1 lg:order-2 rounded-xl border-4 border-gray-300 overflow-hidden 
                 h-[150px] lg:h-[200px] transition-all duration-1000 ease-in-out transform scale-90 mx-auto"
        >
          <Image 
            id="mockup-image"
            src="/foto.jpg" 
            alt="Dashboard de oPills" 
            width={1200} 
            height={675} 
            class="w-full h-full object-cover object-top transition-all duration-1000 ease-in-out transform scale-110" 
          />
        </div>

        <div class="logo-placeholder w-40 shrink-0 order-3 lg:order-3 transition-opacity duration-300">
          <div class="bg-gray-200 h-16 rounded-lg flex items-center justify-center">
            <p class="text-gray-500 text-sm">avte Logo</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<script>
  const mockupContainer = document.getElementById('mockup-container');
  const mockupImage = document.getElementById('mockup-image');
  const logoPlaceholders = document.querySelectorAll('.logo-placeholder');

  if (mockupContainer && mockupImage && logoPlaceholders.length > 0) {
    const handleScroll = () => {
      // Define the scroll range where the image is expanded.
      // e.g., between 50px and 500px from the top.
      const isExpanded = window.scrollY > 50 && window.scrollY < 500;

      if (isExpanded) {
        // REVEALED STATE: Animate to full size
        mockupContainer.classList.remove('h-[150px]', 'lg:h-[200px]', 'scale-90');
        mockupContainer.classList.add('h-[215px]', 'sm:h-[350px]', 'md:h-[504px]', 'scale-105', 'lg:scale-125');
        
        mockupImage.classList.remove('scale-110');
        mockupImage.classList.add('scale-100');

        // Hide logos
        logoPlaceholders.forEach(logo => logo.classList.add('opacity-0', 'invisible'));
      } else {
        // INITIAL STATE: Animate back to cut-off view
        mockupContainer.classList.remove('h-[215px]', 'sm:h-[350px]', 'md:h-[504px]', 'scale-105', 'lg:scale-125');
        mockupContainer.classList.add('h-[150px]', 'lg:h-[200px]', 'scale-90');

        mockupImage.classList.remove('scale-100');
        mockupImage.classList.add('scale-110');
        
        // Show logos
        logoPlaceholders.forEach(logo => logo.classList.remove('opacity-0', 'invisible'));
      }
    };

    window.addEventListener('scroll', handleScroll, { passive: true });
  }
</script>

 