---
// This frontmatter is intentionally left empty.
import { Icon } from 'astro-icon/components';
import Button from '../components/Button.astro';

const features = [
  {
    title: 'Advanced Medication Scheduling',
    description: 'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.',
    icon: 'heroicons:cpu-chip-20-solid',
    classes: 'md:row-span-3',
    bgColor: 'bg-brand-teal-light',
  },
  {
    title: 'Personalized Health Insights',
    description: 'Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.',
    icon: 'heroicons:building-office-2-20-solid',
    classes: 'md:col-span-2',
    bgColor: 'bg-white',
  },
  {
    title: 'Seamless Pharmacy Integration',
    description: 'Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.',
    icon: 'heroicons:phone-20-solid',
    classes: 'md:row-span-2',
    bgColor: 'bg-brand-teal-light',
  },
  {
    title: 'Family & Caregiver Access',
    description: 'Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris.',
    classes: '',
    bgColor: 'bg-white',
  },
  {
    title: 'Get Started Today',
    isCta: true,
    classes: '',
    bgColor: 'bg-brand-teal',
  }
];
---

<section id="features" class="py-20 font-sans overflow-x-hidden">
  <div class="container mx-auto px-8 sm:px-12 md:px-16">
    <!-- Section Header -->
    <div class="text-center mb-12">
      <h2 class="text-4xl font-bold text-brand-teal sm:text-5xl font-script">Features Designed for You</h2>
      <p class="mt-4 text-lg text-brand-text max-w-2xl mx-auto">
        Our platform is built with powerful features to simplify your health management, giving you peace of mind and more time for what matters.
      </p>
    </div>

    <!-- Grid responsivo -->
    <div id="bento-grid" class="grid grid-cols-1 md:grid-cols-3 gap-6">
      
      {features.map(feature => (
        <div class:list={["bento-box rounded-3xl shadow-lg overflow-hidden group transition-all duration-200 ease-in-out hover:translate-y-0.5 hover:shadow-xl hover:shadow-brand-teal/30", feature.classes]}>
          {feature.isCta ? (
            <div class:list={["bento-content h-full p-8 flex flex-col justify-center items-center text-center", feature.bgColor]}>
              <h3 class="text-2xl font-bold mb-4 text-white">Ready to take control?</h3>
              <Button href="#contact" variant="primary">
                Contact Us
              </Button>
            </div>
          ) : (
            <div class:list={["bento-content h-full p-8 flex flex-col text-brand-text", feature.bgColor]}>
              {feature.icon && <Icon name={feature.icon} class="w-12 h-12 mb-4 text-brand-teal-dark transition-transform duration-200 ease-in-out group-hover:scale-90" />}
              <h3 class="text-2xl font-bold mb-3">{feature.title}</h3>
              <p class="text-base opacity-90">{feature.description}</p>
            </div>
          )}
        </div>
      ))}
    </div>
  </div>
</section>

<script>
	import { gsap } from 'gsap';
	import { ScrollTrigger } from 'gsap/ScrollTrigger';

	gsap.registerPlugin(ScrollTrigger);

	document.addEventListener('DOMContentLoaded', () => {
		const boxes = gsap.utils.toArray('.bento-box');

		// 1. Set the initial state of the cards to be invisible and shifted
		gsap.set(boxes, {
			opacity: 0,
			y: 50,
			scale: 0.9,
		});

		// 2. Animate them TO their final state when the trigger is hit
		gsap.to(boxes, {
			scrollTrigger: {
				trigger: '#bento-grid',
				start: 'top 80%',
				toggleActions: 'play none none none',
			},
			duration: 0.8,
			opacity: 1,
			y: 0,
			scale: 1,
			ease: 'power3.out',
			stagger: {
				amount: 0.4,
				from: 'start',
			},
		});
	});
</script>
