---
// This frontmatter is intentionally left empty.
import BrainIcon from '../components/BrainIcon.astro';
import BuildingIcon from '../components/BuildingIcon.astro';
---

<section id="features" class="py-20 px-6 sm:px-8 md:px-12 font-sans overflow-x-hidden">
  <div class="w-full max-w-7xl mx-auto">
    <!-- Grid responsivo: la altura se calculará automáticamente -->
    <div id="bento-grid" class="grid grid-cols-1 md:grid-cols-3 gap-6">
      
      <!-- Columna Izquierda (1 caja alta) -->
      <div class="bento-box md:row-span-3 bg-teal-100 p-6 rounded-3xl shadow-lg min-h-[200px]"></div>

      <!-- Fila Superior, Col 2-3 (1 caja ancha) -->
      <div class="bento-box md:col-span-2 bg-teal-100 p-6 rounded-3xl shadow-lg min-h-[200px]"></div>
      
      <!-- Columna Central, Fila 2-3 (1 caja vertical) -->
      <div class="bento-box md:row-span-2 bg-teal-100 p-6 rounded-3xl shadow-lg min-h-[200px]"></div>
      
      <!-- Celdas restantes en la columna derecha -->
      <div class="bento-box bg-teal-100 p-6 rounded-3xl shadow-lg min-h-[200px]"></div>
      <div class="bento-box bg-teal-100 p-6 rounded-3xl shadow-lg min-h-[200px]"></div>

    </div>
  </div>
</section>

<script>
  import { gsap } from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";

  gsap.registerPlugin(ScrollTrigger);

  const bentoBoxes = gsap.utils.toArray('.bento-box') as HTMLElement[];

  bentoBoxes.forEach((box) => {
    const tl = gsap.timeline({
      scrollTrigger: {
        trigger: box,
        start: "top 50%", // Inicia la animación cuando el elemento está casi completamente visible
        end: "bottom top",
        toggleActions: "play none none none", // Evita que la animación se revierta
      },
      defaults: { duration: 0.6, ease: 'power2.out' }
    });

    tl.from(box, {
      opacity: 0,
      y: 40,
      scale: 0.9
    });
  });
</script>
